:stem: asciimath

= Derivation trees 

This section describes some optimized forms of derivation tree storage.

== 1. SPPF


== 3. BSR set: binary subtree representations set <<sjb19>>

If a packed node, w, has children (β, i, k) and (x, k, j) then w has label (βx, k) or (X ::= βx, k), so we can compute the
children, and the parent, of w if the label of w is modified to be (βx, i, k, j) or (X ::= βx, i, k, j). 

So we can merge 3 node into one BSR element.

The #BSR element# in stem:[\Gamma] is a 4-tuple stem:[(\Omega, i, k, j)], where 0 ≤ i ≤ k ≤ j and stem:[\Omega] in one of the form:

* stem:[X, X := α] is a production in stem:[\Gamma], 
* stem:[\beta, |\beta| > 1] and for some X and δ, stem:[X := βδ] is a production in stem:[\Gamma].

=== Example 
*Grammar* 

image::trees/2024-01-12-14-15-23.png[]

*Input*: "aab"

*Binarised SPPF*

image::trees/2024-01-12-14-24-15.png[]

*BSR set*

stem:[\{(S := a AB, 0, 2, 3), (S := a Ab, 0, 2, 3), (a A, 0, 1, 2), (B := b, 2, 2, 3), (A := a, 1, 1, 2)}]

We can restore binarized SPPF from BSR set.

* No need for graph construction machinery -> Parsers that generate BSR sets are simpler to construct and require less runtime space
* No edges are computed or stored. 

 So you can't apply to this structure error-recovery algorithms with labels on sppf (we use this labels in error-recovery?).

[bibliography]
== References

* [[[sjb19]]] Elizabeth Scott, Adrian Johnstone, L. Thomas van Binsbergen,
Derivation representation using binary subtree sets,
Science of Computer Programming, Volume 175,
2019, Pages 63-84
* [[[izm]]] thesis Izmailova